# ==============================================================================
# üåç GLOBAL AYARLAR
# ==============================================================================
ENV="development"
LOG_LEVEL="INFO"
ENV_FILE_PATH=.env

CONFIG_REPO_PATH=../sentiric-config
CERTIFICATES_REPO_PATH=../sentiric-certificates
ASSETS_REPO_PATH=../sentiric-assets
# --- Security (mTLS) ---
GRPC_TLS_CA_PATH=/sentiric-certificates/certs/ca.crt

# ==============================================================================
# üÜî PROJE Kƒ∞MLƒ∞ƒûƒ∞ VE Aƒû
# ==============================================================================
PROJECT_NAME="sentiric"
PROJECT_TLD="cloud"

# Network (Docker Compose i√ßin)
NETWORK_NAME="sentiric.cloud"
NETWORK_SUBNET=10.88.0.0/16
NETWORK_GATEWAY=10.88.0.1

# Discovery Service (DNS)
DISCOVERY_DATACENTER_NAME="${PROJECT_NAME}-main"
DISCOVERY_DOMAIN="${PROJECT_NAME}.${PROJECT_TLD}"
DISCOVERY_SERVICE_SUBDOMAIN="service"
DISCOVERY_DNS_SEARCH_DOMAIN="${DISCOVERY_SERVICE_SUBDOMAIN}.${DISCOVERY_DOMAIN}"
DISCOVERY_METHOD="DNS"
DISCOVERY_SERVICE_IPV4_ADDRESS=10.88.5.1

# ==============================================================================
# üèóÔ∏è ALTYAPI (INFRASTRUCTURE)
# ==============================================================================

# ==============================================================================
# üëÇ STT SERVICE (WHISPER - SES TANIMA)
# ==============================================================================
# --- Network Ayarlarƒ± ---
STT_WHISPER_SERVICE_HOST=stt-whisper-service
STT_WHISPER_SERVICE_IPV4_ADDRESS=10.88.50.3
STT_WHISPER_SERVICE_HTTP_PORT=15030
STT_WHISPER_SERVICE_GRPC_PORT=15031
STT_WHISPER_SERVICE_METRICS_PORT=15032
STT_WHISPER_SERVICE_LISTEN_ADDRESS=0.0.0.0

# --- Model Se√ßimi (Hƒ±zlƒ± ve Kaliteli) ---
STT_WHISPER_SERVICE_MODEL_DIR=/models
# Product Ready
# STT_WHISPER_SERVICE_MODEL_FILENAME=ggml-large-v3-turbo-q8_0.bin

# Performans i√ßin daha d√º≈ü√ºk bir model tercih edilebilir
STT_WHISPER_SERVICE_MODEL_FILENAME=ggml-large-v3-turbo-q5_0.bin

# Test i√ßin kullanƒ±labilir.
# STT_WHISPER_SERVICE_MODEL_FILENAME=ggml-medium-q5_0.bin

# Vad i√ßin gerekli
STT_WHISPER_SERVICE_VAD_MODEL=ggml-silero-vad.bin

# --- Motor ve Performans ---
# --- Donanƒ±m Ayarlarƒ± (GPU Modu - ~1.0GB VRAM Kullanƒ±r) ---
STT_WHISPER_SERVICE_DEVICE=auto
STT_WHISPER_SERVICE_COMPUTE_TYPE=float16
STT_WHISPER_SERVICE_THREADS=4
STT_WHISPER_SERVICE_PARALLEL_REQUESTS=2
# Dynamic Batching (Aynƒ± anda i≈ülenecek istek sayƒ±sƒ±)
STT_WHISPER_SERVICE_PARALLEL_REQUESTS=2
# Queue Timeout (Kuyrukta bekleme s√ºresi ms) - CPU i√ßin uzun tutuyoruz
STT_WHISPER_SERVICE_QUEUE_TIMEOUT_MS=60000

# --- √ñzellikler ---
# --- Transkripsiyon Ayarlarƒ± ---
STT_WHISPER_SERVICE_LANGUAGE=auto
STT_WHISPER_SERVICE_TRANSLATE=false
# Konu≈ümacƒ± Ayrƒ±≈ütƒ±rma
STT_WHISPER_SERVICE_ENABLE_DIARIZATION=true
STT_WHISPER_SERVICE_ENABLE_VAD=true

# --- Geli≈ümi≈ü Ayarlar (Hal√ºsinasyon √ñnleme) ---
STT_WHISPER_SERVICE_BEAM_SIZE=5
STT_WHISPER_SERVICE_TEMPERATURE=0.0
STT_WHISPER_SERVICE_BEST_OF=5

# --- Geli≈ümi≈ü Ayarlar (Hal√ºsinasyon √ñnleme - SIKI MOD) ---

# 1. Log Probability E≈üiƒüi: D√º≈ü√ºk g√ºvenli (uydurma) kelimeleri atar.
# Varsayƒ±lan -0.8 idi, -0.6 yaparak daha se√ßici oluyoruz.
STT_WHISPER_SERVICE_LOGPROB_THRESHOLD=-0.6

# 2. No Speech Threshold: Sessizlik olasƒ±lƒ±ƒüƒ±.
# Eƒüer model %80 ihtimalle "burada ses yok" diyorsa, zorlama.
STT_WHISPER_SERVICE_NO_SPEECH_THRESHOLD=0.8

# 3. [KRƒ∞Tƒ∞K] VAD E≈üiƒüi (Silero):
# Bunu .env dosyanƒ±zda g√∂remedim, eklenmeli.
# Varsayƒ±lan 0.5'tir. Bunu 0.6 veya 0.7 yapmak, sadece NET konu≈ümalarƒ± almasƒ±nƒ± saƒülar.
# Nefes, tƒ±kƒ±rtƒ± vb. elenir.
STT_WHISPER_SERVICE_VAD_THRESHOLD=0.65

# 4. [KRƒ∞Tƒ∞K] VAD Min Duration:
# 200ms'den kƒ±sa sesleri (√ßƒ±t, pƒ±t) yok say.
STT_WHISPER_SERVICE_VAD_MS_MIN_DURATION=200

STT_WHISPER_SERVICE_FLASH_ATTN=true
STT_WHISPER_SERVICE_SUPPRESS_NST=false

# --- Loglama ---
STT_WHISPER_SERVICE_LOG_LEVEL=info

# --- G√ºvenlik / Sertifikalar ---
STT_WHISPER_SERVICE_CERT_PATH=/sentiric-certificates/certs/tts-whisper-service-chain.crt
STT_WHISPER_SERVICE_KEY_PATH=/sentiric-certificates/certs/tts-whisper-service.key