<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#09090b">
    <title>Sentiric Omni-Studio v7</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Accordion & Overlay Fixes */
        .accordion-header {
            width: 100%; text-align: left; background: var(--bg-input); border: 1px solid var(--border);
            padding: 10px 12px; font-size: 11px; font-weight: 700; color: var(--text-muted);
            border-radius: 8px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 8px; transition: 0.2s;
        }
        .accordion-header:hover { background: var(--border); color: var(--text-main); }
        .accordion-content { display: none; padding: 0 4px; animation: slideDown 0.3s ease; }
        .accordion-content.active { display: block; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        
        .sidebar-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 45; opacity: 0; pointer-events: none; transition: 0.3s; backdrop-filter: blur(4px); }
        .sidebar-overlay.active { opacity: 1; pointer-events: auto; }
    </style>
</head>
<body data-theme="dark">

<nav class="mobile-nav">
    <button class="nav-btn" id="mobLeftBtn"><i class="fas fa-sliders-h"></i></button>
    <div class="nav-brand">SENTIRIC <span class="badge">PRO</span></div>
    <div class="nav-actions">
        <button class="nav-btn theme-toggle"><i class="fas fa-moon"></i></button>
        <button class="nav-btn" id="mobRightBtn"><i class="fas fa-chart-bar"></i></button>
    </div>
</nav>

<div class="app-layout">
    <div class="sidebar-overlay" id="overlayLeft"></div>
    <div class="sidebar-overlay" id="overlayRight"></div>

    <aside class="sidebar left" id="sidebarLeft">
        <div class="sidebar-header">
            <div class="brand">
                <div class="logo"><i class="fas fa-wave-square"></i></div>
                <div class="brand-text"><h1>SENTIRIC</h1><span>WORKSTATION v7.0</span></div>
            </div>
            <button class="close-sidebar mobile-only" id="closeLeft"><i class="fas fa-times"></i></button>
        </div>
        <div class="sidebar-scroll">
            
            <div class="panel-section">
                <div class="section-title">GÄ°RÄ°Åž & MOD</div>
                <div class="input-group"><i class="fas fa-globe"></i><select id="langSelect"><option value="auto">âœ¨ Otomatik</option><option value="tr">ðŸ‡¹ðŸ‡· TÃ¼rkÃ§e</option><option value="en">ðŸ‡ºðŸ‡¸ English</option></select></div>
                <div class="input-group"><i class="fas fa-terminal"></i><textarea id="promptInput" placeholder="Sistem Prompt..."></textarea></div>
            </div>

            <div class="panel-section">
                <div class="section-title">Ä°ÅžLEM HATTI</div>
                <div class="switch-row"><div class="switch-label"><span>Ã‡eviri Modu</span><small>Ä°ngilizceye Ã§evir</small></div><label class="toggle"><input type="checkbox" id="translateToggle"><span class="slider"></span></label></div>
                <div class="switch-row"><div class="switch-label"><span>Speaker Diarization</span><small>KiÅŸi ayrÄ±ÅŸtÄ±rma</small></div><label class="toggle"><input type="checkbox" id="diarizationToggle" checked><span class="slider"></span></label></div>
            </div>

            <div class="panel-section">
                <button class="accordion-header" onclick="UI.toggleAcc('dspAcc')">
                    <span>âš¡ SES MOTORU (DSP)</span><i class="fas fa-chevron-down"></i>
                </button>
                <div id="dspAcc" class="accordion-content">
                    <div class="range-group"><div class="range-header"><span>Filtre GÃ¼cÃ¼</span><span id="lpfDisplay">0.07</span></div><input type="range" id="lpfRange" min="0.01" max="0.50" step="0.01" value="0.07"></div>
                    <div class="range-group"><div class="range-header"><span>Cinsiyet EÅŸiÄŸi (Hz)</span><span id="pitchGateDisplay">170</span></div><input type="range" id="pitchGateRange" min="100" max="250" step="5" value="170"></div>
                    <div class="range-group"><div class="range-header"><span>KÃ¼meleme Hassasiyeti</span><span id="clusterDisplay">0.85</span></div><input type="range" id="clusterRange" min="0.70" max="0.99" step="0.01" value="0.85"></div>
                    <button class="action-btn danger" style="width:100%" onclick="UI.resetSettings()">SÄ±fÄ±rla</button>
                </div>
            </div>
            
            <div class="panel-section">
                 <div class="section-title">MODEL PARAMETRELERÄ°</div>
                 <div class="range-group"><div class="range-header"><span>Temp</span><span id="tempDisplay">0.0</span></div><input type="range" id="tempRange" min="0" max="1" step="0.1" value="0"></div>
            </div>
        </div>
    </aside>

    <main class="stage">
        <header class="stage-header desktop-only">
            <div class="header-title"><i class="fas fa-stream"></i> CanlÄ± AkÄ±ÅŸ</div>
            <div class="header-actions">
                <button class="action-btn theme-toggle"><i class="fas fa-moon"></i></button>
                <div class="sep"></div>
                <button class="action-btn danger" onclick="UI.clear()"><i class="fas fa-trash"></i></button>
            </div>
        </header>

        <div id="transcriptFeed" class="transcript-container">
            <div class="empty-placeholder">
                <div class="placeholder-icon"><i class="fas fa-microphone-lines"></i></div>
                <h3>Sistem HazÄ±r</h3>
                <p>Sentiric AI dinliyor.</p>
            </div>
        </div>

        <div class="dock-wrapper">
            <div class="dock">
                <canvas id="audioVisualizer"></canvas>
                <div class="dock-left">
                    <input type="file" id="fileInput" hidden accept="audio/*">
                    <button class="dock-btn secondary" onclick="document.getElementById('fileInput').click()"><i class="fas fa-folder-open"></i></button>
                </div>
                <div class="dock-center">
                    <!-- Timer YukarÄ± AlÄ±ndÄ± -->
                    <div id="recordTimer" class="timer-pill">00:00</div>
                    <button id="recordBtn" class="record-fab"><i class="fas fa-microphone"></i></button>
                </div>
                <div class="dock-right">
                    <button class="dock-btn secondary" id="vadBtn"><div class="active-dot"></div><i class="fas fa-robot"></i></button>
                </div>
            </div>
        </div>
    </main>

    <aside class="sidebar right" id="sidebarRight">
        <div class="sidebar-header"><h3>Analiz & Ã‡Ä±ktÄ±</h3><button class="close-sidebar mobile-only" id="closeRight"><i class="fas fa-times"></i></button></div>
        <div class="sidebar-scroll">
            <div class="metric-hero"><div class="m-label">RTF</div><div class="m-value-lg" id="rtfVal">0.0x</div></div>
            <div class="metrics-grid">
                <div class="metric-box"><div class="m-label">SÃœRE</div><div class="m-val" id="durVal">0s</div></div>
                <div class="metric-box"><div class="m-label">Ä°ÅžLEM</div><div class="m-val" id="procVal">0ms</div></div>
                <div class="metric-box"><div class="m-label">GÃœVEN</div><div class="m-val" id="confVal">-</div></div>
                <div class="metric-box"><div class="m-label">DÄ°L</div><div class="m-val" id="langVal">-</div></div>
            </div>
            <div class="json-panel">
                <div class="panel-header">
                    <span>VERÄ° Ã‡IKTISI</span>
                    <div style="display:flex; gap:4px">
                        <button class="action-btn" style="padding:2px 8px" onclick="UI.export('json')">JSON</button>
                        <button class="action-btn" style="padding:2px 8px" onclick="UI.export('txt')">TXT</button>
                    </div>
                </div>
                <pre id="jsonOutput">Bekleniyor...</pre>
            </div>
        </div>
    </aside>
</div>

<script src="app.js"></script>
</body>
</html>